
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 10 Â· HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.6.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../chapter11/" />
    
    
    <link rel="prev" href="../chapter9/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../conventions/">
            
                <a href="../conventions/">
            
                    
                    Conventions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chapter1/">
            
                <a href="../chapter1/">
            
                    
                    Chapter 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../chapter2/">
            
                <a href="../chapter2/">
            
                    
                    Chapter 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../chapter3/">
            
                <a href="../chapter3/">
            
                    
                    Chapter 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../chapter4/">
            
                <a href="../chapter4/">
            
                    
                    Chapter 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../chapter5/">
            
                <a href="../chapter5/">
            
                    
                    Chapter 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../chapter6/">
            
                <a href="../chapter6/">
            
                    
                    Chapter 6
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../chapter7/">
            
                <a href="../chapter7/">
            
                    
                    Chapter 7
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../chapter8/">
            
                <a href="../chapter8/">
            
                    
                    Chapter 8
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../chapter9/">
            
                <a href="../chapter9/">
            
                    
                    Chapter 9
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.12" data-path="./">
            
                <a href="./">
            
                    
                    Chapter 10
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../chapter11/">
            
                <a href="../chapter11/">
            
                    
                    Chapter 11
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../chapter12/">
            
                <a href="../chapter12/">
            
                    
                    Chapter 12
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Chapter 10</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="working-with-data-in-react">Working with Data in React</h1>
<ul>
<li><a href="#working-with-data-in-react">Working with Data in React</a><ul>
<li><a href="#using-fetch">Using <strong>fetch()</strong></a><ul>
<li><a href="#using-await-and-async">Using <code>await</code> and <code>async</code></a></li>
</ul>
</li>
<li><a href="#date-requests-and-component-lifecycles">Date Requests and Component Lifecycles</a><ul>
<li><a href="#fetching-during-componentdidmount">Fetching During <strong>componentDidMount()</strong></a></li>
<li><a href="#fetching-with-function-components">Fetching with Function Components</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="using-fetch">Using <strong>fetch()</strong></h2>
<p>The function <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank"><strong>window.fetch()</strong></a> is a lightweight way to access remote data sources in most web browser contexts.</p>
<p>It accepts a URL and HTTP request options such as which method, mode, and any addition headers to send with the request. It returns a promise that will resolve into a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank"><strong>Response</strong> object</a>.</p>
<pre><code class="lang-javascript">fetch(URL, options);
</code></pre>
<p>The two processing functions of the <strong>Response</strong> object, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Body/text" target="_blank"><strong>text()</strong></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Body/json" target="_blank"><strong>json()</strong></a>, each also return promises.</p>
<p>When used together, the promise returned by <strong>fetch()</strong> and the processing functions of <strong>Response</strong> can be chained together.</p>
<pre><code class="lang-javascript">fetch(URL, options)
.then(<span class="hljs-function">(<span class="hljs-params">Response</span>) =&gt;</span> Response.json())
.then(<span class="hljs-function">(<span class="hljs-params">ProcessesedResponse</span>) =&gt;</span> {
    <span class="hljs-comment">// Do something with the processed response</span>
})
</code></pre>
<h3 id="using-await-and-async">Using <code>await</code> and <code>async</code></h3>
<p>As both also return promises, the keyword <code>await</code> and <code>async</code> can be used with them to wait for the promises to resolve and do something with their data.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">async</span> fetchExample = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(URL, options);
  <span class="hljs-keyword">let</span> processed = <span class="hljs-keyword">await</span> response.json();
}
</code></pre>
<h2 id="date-requests-and-component-lifecycles">Date Requests and Component Lifecycles</h2>
<p>Promises can take time to resolve. With this in mind, when to use <strong>fetch()</strong> and wait for it to resolve becomes an important issue. In considering the React class component lifecycle, only one function makes sense.</p>
<h3 id="fetching-during-componentdidmount">Fetching During <strong>componentDidMount()</strong></h3>
<p>Within the class component lifecycle, the mounting phase ends with the function <strong>componentDidMount()</strong>. By the time it is called, both the <strong>constructor()</strong> and <strong>render()</strong> functions have also been called. Any elements or other components have been added to the document.</p>
<p>Using the function <strong>componentDidMonunt()</strong>, then, makes sense. Once the initial elements and components have been added, data can be fetched that may result in things been changed or adjust within the class component.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{

  state = {
      <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;&quot;</span>
  };

  <span class="hljs-keyword">async</span> componentDidMount() {
    <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> fetch(URL);
    <span class="hljs-keyword">let</span> processed = <span class="hljs-keyword">await</span> response.json();
    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">data</span>: processed})
  }

  render() {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{this.state.data}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
  }

}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Example;
</code></pre>
<h3 id="fetching-with-function-components">Fetching with Function Components</h3>
<p>At initial glance, the function <strong>useEffect()</strong> would seem to be a good candidate for use with <strong>fetch()</strong>. After all, it is called after the function component is rendered and would thus, like with <strong>componentDidMount()</strong> for class components, run after the initial elements had been added to the document.</p>
<p>However, there is a issue. If <strong>useEffect()</strong> is paired with <strong>useState()</strong>, one would trigger the other, which would then trigger the other. This would create an infinite loop!</p>
<p>The solution is to check values. The second argument of <strong>useEffect()</strong> is an array of values. If they have not changed, the returned elements will not be updated. Thus, through checking whatever is processed, the initial state variables of the function component can be checked. If they have updated, the elements will be re-rendered. If not, nothing will happen.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> React, { Component } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;react&apos;</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{

  state = {
      <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;&quot;</span>
  };

  <span class="hljs-keyword">async</span> componentDidMount() {
    <span class="hljs-keyword">let</span> response = fetch(URL);
    <span class="hljs-keyword">let</span> processed = response.json();
    <span class="hljs-keyword">this</span>.setState({<span class="hljs-attr">data</span>: processed})
  }

  render() {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{this.state.data}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
  }

}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Example;
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../chapter9/" class="navigation navigation-prev " aria-label="Previous page: Chapter 9">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../chapter11/" class="navigation navigation-next " aria-label="Next page: Chapter 11">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 10","level":"1.12","depth":1,"next":{"title":"Chapter 11","level":"1.13","depth":1,"path":"chapter11/index.md","ref":"chapter11/index.md","articles":[]},"previous":{"title":"Chapter 9","level":"1.11","depth":1,"path":"chapter9/index.md","ref":"chapter9/index.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./chapters","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"chapter10/index.md","mtime":"2020-05-02T13:22:00.082Z","type":"markdown"},"gitbook":{"version":"3.6.0","time":"2020-08-09T20:44:23.075Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

